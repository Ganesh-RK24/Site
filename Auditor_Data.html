<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Auditor Data Upload & Reports</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  /* Reset & base styles */
  * { box-sizing: border-box; }
  body { margin: 0; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f5f5; color: #333; padding: 20px; min-height: 100vh; display: flex; justify-content: center; }
  .container { max-width: 1200px; width: 100%; }

  h2 { color: #007bff; margin-bottom: 25px; font-weight: 700; font-size: 2.2rem; user-select: none; }
  h3 { margin-top: 0; margin-bottom: 20px; color: #007bff; font-weight: 700; font-size: 1.4rem; display: flex; align-items: center; gap: 8px; }

  .section, .upload-section, .filter-section {
    background: #fff; padding: 25px 30px; border-radius: 12px; box-shadow: 0 4px 18px rgba(0,123,255,0.2); margin-bottom: 25px; user-select: none;
  }

  .form-row { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 18px; }
  .form-row > * { flex: 1 1 200px; min-width: 150px; }

  input, select, button { padding: 14px 16px; border-radius: 8px; border: 1px solid #ccc; font-size: 1rem; width: 100%; transition: background-color 0.25s, box-shadow 0.25s; font-weight: 600; outline-offset: 2px; cursor: pointer; }
  input[type="file"]::-webkit-file-upload-button { background: #007bff; color: #fff; border: none; padding: 10px 18px; cursor: pointer; border-radius: 8px; font-weight: 700; transition: background-color 0.25s; }
  input[type="file"]::-webkit-file-upload-button:hover { background: #0056b3; }

  input:focus, select:focus, button:focus { background-color: #e9f5ff; box-shadow: 0 0 6px #007bff; outline-color: #007bff; }
  button { background-color: #007bff; color: #fff; font-weight: 700; min-width: 160px; height: 48px; display: flex; align-items: center; justify-content: center; }
  button:hover { background-color: #0056b3; }
  button:disabled { background-color: #ccc; cursor: not-allowed; color: #888; }

  .message { margin-top: 12px; font-weight: 700; min-height: 24px; font-size: 1rem; transition: color 0.3s; user-select: text; }

  table { width: 100%; border-collapse: collapse; background: #fff; color: #333; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,123,255,0.2); table-layout: fixed; word-wrap: break-word; display: block; max-height: 450px; overflow-y: auto; }
  thead { display: table; width: 100%; table-layout: fixed; background-color: #007bff; color: #fff; font-weight: 700; position: sticky; top: 0; z-index: 2; }
  tbody { display: block; width: 100%; max-height: 450px; overflow-y: auto; scrollbar-width: thin; scrollbar-color: #007bff #f5f5f5; }
  tbody::-webkit-scrollbar { width: 10px; }
  tbody::-webkit-scrollbar-track { background: #f5f5f5; }
  tbody::-webkit-scrollbar-thumb { background-color: #007bff; border-radius: 10px; border: 3px solid #f5f5f5; }
  tr { display: table; width: 100%; table-layout: fixed; }
  th, td { padding: 14px 16px; border-bottom: 1px solid #ddd; text-align: left; overflow-wrap: break-word; }
  tr:hover { background-color: #f1f1f1; }

  .download-button { background-color: #28a745; color: white; font-weight: 700; padding: 14px 0; border-radius: 8px; cursor: pointer; border: none; min-width: 160px; height: 48px; display: flex; align-items: center; justify-content: center; transition: background-color 0.3s; }
  .download-button:hover { background-color: #218838; }

  @media (max-width: 650px) {
    .form-row { flex-direction: column; }
    .form-row > * { flex: 1 1 100%; min-width: auto; }
    table { font-size: 0.9rem; }
    button, .download-button { width: 100%; min-width: auto; }
  }
</style>
</head>
<body>
<div class="container">
  <h2>Auditor Data Upload & Reports</h2>

  <!-- Manpower Section -->
  <div class="section">
    <h3>🧑‍🔧 Manpower Data Entry</h3>
    <div class="form-row">
      <input type="date" id="mpDate" aria-label="Manpower Date" />
      <select id="mpWarehouse" aria-label="Manpower Warehouse">
        <option value="">Select Warehouse</option>
        <option value="W501">W501</option>
        <option value="W503">W503</option>
        <option value="W504">W504</option>
        <option value="W506">W506</option>
        <option value="W509">W509</option>
        <option value="W511">W511</option>
        <option value="W512">W512</option>
      </select>
      <select id="mpVendor" aria-label="Manpower Vendor">
        <option value="">Select Vendor</option>
        <option value="Matrix Business Services India Private Limited">Matrix Business Services India Private Limited</option>
        <option value="PRO-Team Solution Pvt Ltd">PRO-Team Solution Pvt Ltd</option>
      </select>
      <input type="number" id="mpCount" placeholder="MP Count" aria-label="Manpower Count" min="0" />
    </div>
    <button id="submitMP" type="button">Submit Manpower Entry</button>
    <div class="message" id="mpMessage" role="alert" aria-live="polite"></div>
  </div>

  <!-- Upload Section -->
  <div class="upload-section">
    <h3>📤 Please Upload Counted Data ⬆️</h3>
    <div class="form-row">
      <input type="file" id="fileInput" accept=".csv" aria-label="CSV File Input" />
      <button id="uploadBtn" type="button">📤 Upload CSV</button>
    </div>
    <div class="message" id="message" role="alert" aria-live="polite"></div>
  </div>

  <!-- Filter Section -->
  <div class="filter-section" aria-label="Filter Section">
    <div class="form-row">
      <input type="date" id="fromDate" placeholder="From Date" aria-label="From Date Filter" />
      <input type="date" id="toDate" placeholder="To Date" aria-label="To Date Filter" />
      <select id="filterWarehouse" aria-label="Warehouse Filter">
        <option value="">All Warehouses</option>
        <option value="W501">W501</option>
        <option value="W503">W503</option>
        <option value="W504">W504</option>
        <option value="W506">W506</option>
        <option value="W509">W509</option>
        <option value="W511">W511</option>
        <option value="W512">W512</option>
      </select>
    </div>
    <div class="form-row">
      <button id="filterBtn" type="button">Filter</button>
      <button class="download-button" id="downloadCsvBtn" type="button">Download CSV</button>
    </div>
  </div>

  <!-- Table Section -->
  <div class="section">
    <h3>📊 Counted Data</h3>
    <table id="dataTable">
      <thead>
        <tr>
          <th>Date</th>
          <th>Warehouse</th>
          <th>Vendor</th>
          <th>Item</th>
          <th>Quantity</th>
        </tr>
      </thead>
      <tbody>
        <!-- Data Rows Injected Here -->
      </tbody>
    </table>
  </div>
</div>

<script>
  // Supabase initialization placeholder
  const supabaseUrl = 'YOUR_SUPABASE_URL';
  const supabaseKey = 'YOUR_SUPABASE_KEY';
  const supabase = Supabase.createClient(supabaseUrl, supabaseKey);

  // Manpower submit
  document.getElementById('submitMP').addEventListener('click', () => {
    const date = document.getElementById('mpDate').value;
    const warehouse = document.getElementById('mpWarehouse').value;
    const vendor = document.getElementById('mpVendor').value;
    const count = document.getElementById('mpCount').value;

    if (!date || !warehouse || !vendor || !count) {
      document.getElementById('mpMessage').textContent = 'All fields are required!';
      return;
    }
    document.getElementById('mpMessage').textContent = 'Manpower entry submitted!';
    // Supabase insert logic goes here
  });

  // CSV upload
  document.getElementById('uploadBtn').addEventListener('click', () => {
    const fileInput = document.getElementById('fileInput');
    if (!fileInput.files.length) {
      document.getElementById('message').textContent = 'Please select a CSV file!';
      return;
    }
    document.getElementById('message').textContent = 'Uploading...';
    // Supabase file upload logic goes here
  });

  // Filter
  document.getElementById('filterBtn').addEventListener('click', () => {
    document.getElementById('message').textContent = 'Filtering data...';
    // Filtering logic goes here
  });

  // CSV download
  document.getElementById('downloadCsvBtn').addEventListener('click', () => {
    document.getElementById('message').textContent = 'Downloading CSV...';
    // CSV download logic goes here
  });
</script>
</body>
</html>
