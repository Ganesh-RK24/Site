<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      margin: 0;
      background-color: #f0f2f5;
    }

    .side-panel {
      width: 250px;
      background-color: #2c3e50;
      color: #fff;
      padding: 20px;
      height: 100vh;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      position: fixed;
    }

    .side-panel h2 {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 30px;
      cursor: pointer;
    }

    .side-panel a {
      text-decoration: none;
      color: #fff;
      font-size: 16px;
      margin: 10px 0;
      padding: 10px;
      border-radius: 4px;
      transition: background-color 0.3s;
      cursor: pointer;
    }

    .side-panel a:hover {
      background-color: #34495e;
    }

    .side-panel .logout {
      margin-top: auto;
      background-color: #e74c3c;
    }

    .main-panel {
      margin-left: 250px;
      padding: 40px;
      flex-grow: 1;
      background-color: #fff;
      height: 100vh;
      box-sizing: border-box;
      overflow-y: auto;
    }

    .main-panel h1 {
      font-size: 32px;
      font-weight: bold;
      color: #333;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 15px;
    }

    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }

    input, select {
      width: 300px;
      padding: 10px;
      box-sizing: border-box;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background-color: #3498db;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:hover {
      background-color: #2980b9;
    }

    .user-list {
      margin-top: 20px;
    }

    .user-list table {
      width: 100%;
      border-collapse: collapse;
    }

    .user-list table th, .user-list table td {
      padding: 10px;
      text-align: left;
      border: 1px solid #ddd;
    }

    .user-list table th {
      background-color: #f2f2f2;
    }
  </style>
</head>
<body>

  <!-- Side Panel -->
  <div class="side-panel">
    <h2 onclick="showWelcome()">Dashboard</h2>
    <a onclick="showWelcome()">Dashboard Overview</a>
    <a href="#">Master Reports</a>
    <a href="#">Audit Reports</a>
    <a onclick="showUserSettings()">User Settings</a>
    <a href="#">Notifications</a>
    <a href="#">Help</a>
    <a href="#" class="logout" onclick="logout()">Logout</a>
  </div>

  <!-- Main Panel -->
  <div class="main-panel">
    <h1 id="welcome">Welcome</h1>
    <div id="content-area"></div>
  </div>

  <script>
    const user = JSON.parse(localStorage.getItem('loggedInUser'));
    if (user && user.username) {
      document.getElementById('welcome').textContent = `Welcome, ${user.username}`;
    }

    function showWelcome() {
      window.location.href = 'index.html'; // Replace 'index.html' with your homepage URL
    }


    function logout() {
      localStorage.removeItem('loggedInUser');
      window.location.href = 'index.html';
    }

    function showUserSettings() {
      document.getElementById('welcome').textContent = 'User Settings';
      document.getElementById('content-area').innerHTML = `
        <div class="user-actions">
          <button onclick="showAddUser()">Add User</button>
          <button onclick="showModifyUser()">Modify User</button>
          <button onclick="showViewUsers()">View Users</button>
        </div>
      `;
    }

    function showAddUser() {
      document.getElementById('welcome').textContent = 'Add User';
      document.getElementById('content-area').innerHTML = `
        <form onsubmit="addUser(event)">
          <div class="form-group">
            <label>User ID (SAP ID)</label>
            <input type="text" id="userId" required>
          </div>
          <div class="form-group">
            <label>User Name</label>
            <input type="text" id="username" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="password" id="password" required>
          </div>
          <div class="form-group">
            <label>Mail ID</label>
            <input type="email" id="mail" required>
          </div>
          <div class="form-group">
            <label>Role</label>
            <select id="role" required>
              <option value="">Select Role</option>
              <option>Admin</option>
              <option>Executive</option>
              <option>Team Leader</option>
              <option>Employee</option>
            </select>
          </div>
          <button type="submit">Add User</button>
        </form>
      `;
    }

    function addUser(e) {
      e.preventDefault();
      const userId = document.getElementById('userId').value.trim();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();
      const mail = document.getElementById('mail').value.trim();
      const role = document.getElementById('role').value;

      const newUser = { userId, username, password, gmail: mail, role };

      let users = JSON.parse(localStorage.getItem('users')) || [];

      const exists = users.some(user => user.userId === userId);
      if (exists) {
        alert('User ID already exists.');
        return;
      }

      users.push(newUser);
      localStorage.setItem('users', JSON.stringify(users));
      alert('User added successfully!');
      showUserSettings();
    }

    function showModifyUser() {
      document.getElementById('welcome').textContent = 'Modify User';
      document.getElementById('content-area').innerHTML = `
        <form onsubmit="findUser(event)">
          <div class="form-group">
            <label>Enter User ID (SAP ID)</label>
            <input type="text" id="searchUserId" required>
          </div>
          <button type="submit">Find User</button>
        </form>
        <div id="edit-user-form"></div>
      `;
    }

    function findUser(e) {
      e.preventDefault();
      const userId = document.getElementById('searchUserId').value.trim();
      let users = JSON.parse(localStorage.getItem('users')) || [];
      const user = users.find(u => u.userId === userId);

      if (!user) {
        alert('User not found.');
        return;
      }

      document.getElementById('edit-user-form').innerHTML = `
        <form onsubmit="updateUser(event, '${userId}')">
          <div class="form-group">
            <label>User Name</label>
            <input type="text" id="editUsername" value="${user.username}" required>
          </div>
          <div class="form-group">
            <label>Password</label>
            <input type="text" id="editPassword" value="${user.password}" required>
          </div>
          <div class="form-group">
            <label>Mail ID</label>
            <input type="email" id="editMail" value="${user.gmail}" required>
          </div>
          <div class="form-group">
            <label>Role</label>
            <select id="editRole" required>
              <option ${user.role === 'Admin' ? 'selected' : ''}>Admin</option>
              <option ${user.role === 'Executive' ? 'selected' : ''}>Executive</option>
              <option ${user.role === 'Team Leader' ? 'selected' : ''}>Team Leader</option>
              <option ${user.role === 'Employee' ? 'selected' : ''}>Employee</option>
            </select>
          </div>
          <button type="submit">Update User</button>
        </form>
      `;
    }

    function updateUser(e, userId) {
      e.preventDefault();
      let users = JSON.parse(localStorage.getItem('users')) || [];

      const index = users.findIndex(u => u.userId === userId);
      if (index === -1) return alert('User not found.');

      users[index].username = document.getElementById('editUsername').value.trim();
      users[index].password = document.getElementById('editPassword').value.trim();
      users[index].gmail = document.getElementById('editMail').value.trim();
      users[index].role = document.getElementById('editRole').value;

      localStorage.setItem('users', JSON.stringify(users));
      alert('User updated successfully!');
      showUserSettings();
    }

    function showViewUsers() {
      let users = JSON.parse(localStorage.getItem('users')) || [];
      if (users.length === 0) {
        alert('No users found.');
        return;
      }

      let tableContent = `
        <div class="user-list">
          <table>
            <thead>
              <tr>
                <th>User ID</th>
                <th>User Name</th>
                <th>Role</th>
              </tr>
            </thead>
            <tbody>
      `;
      
      users.forEach(user => {
        tableContent += `
          <tr>
            <td>${user.userId}</td>
            <td>${user.username}</td>
            <td>${user.role}</td>
          </tr>
        `;
      });

      tableContent += `
            </tbody>
          </table>
        </div>
      `;
      
      document.getElementById('content-area').innerHTML = tableContent;
    }
  </script>

</body>
</html>
